<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />

    
    
    <title>How to make better spaghetti plots</title>

        <script src="how-to-make-better-spaghetti-plots_files/header-attrs-2.9/header-attrs.js"></script>
        <script src="how-to-make-better-spaghetti-plots_files/jquery-1.11.3/jquery.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="how-to-make-better-spaghetti-plots_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
        <script src="how-to-make-better-spaghetti-plots_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
        <script src="how-to-make-better-spaghetti-plots_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
        <script src="how-to-make-better-spaghetti-plots_files/bootstrap-3.3.5/shim/respond.min.js"></script>
        <style>h1 {font-size: 34px;}
               h1.title {font-size: 38px;}
               h2 {font-size: 30px;}
               h3 {font-size: 24px;}
               h4 {font-size: 18px;}
               h5 {font-size: 16px;}
               h6 {font-size: 12px;}
               code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
               pre:not([class]) { background-color: white }</style>
        <script src="how-to-make-better-spaghetti-plots_files/navigation-1.1/tabsets.js"></script>
        <script src="how-to-make-better-spaghetti-plots_files/kePrint-0.0.1/kePrint.js"></script>
        <link href="how-to-make-better-spaghetti-plots_files/lightable-0.0.1/lightable.css" rel="stylesheet" />
        
          <meta property="og:title" content="How to make better spaghetti plots" />
          <meta property="og:type" content="article">
          <meta property="og:description" content="How to explore longitudinal data effectively  
        " />
          <meta property="og:url" content="https://datamotto.com/posts/dotto/D007-2021-09-01-how-to-make-better-spaghetti-plots/" />
          <meta property="og:locale" content="en_US">
          <meta property="og:site_name" content="Data Motto">
          <meta property="og:image" content="https://datamotto.com/assets/img/logo.svg" />
          
        
          <meta property="twitter:card" content="summary_large_image">
          <meta property="twitter:title" content="How to make better spaghetti plots">
          <meta property="twitter:description" content="How to explore longitudinal data effectively  
        ">
          <meta property="twitter:url" content="https://datamotto.com/posts/dotto/D007-2021-09-01-how-to-make-better-spaghetti-plots/">
          <meta property="twitter:image" content="https://datamotto.com/assets/img/logo.svg">
          
    
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WZMEMQM0Y2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WZMEMQM0Y2');
</script>
<link rel="shortcut icon" href="../../../assets/img/favicon/favicon-32x32.png" />
<link rel="stylesheet" href="../../../assets/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" href="../../../assets/css/Font-Awesome-5-Brands.css" />
<link rel="stylesheet" href="../../../assets/css/Font-Awesome-5-Free.css" />
<link rel="stylesheet" href="../../../assets/css/icomoon.css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata" />
<link rel="stylesheet" href="../../../assets/fonts/fontawesome-all.min.css" />
<link rel="stylesheet" href="../../../assets/fonts/font-awesome.min.css" />
<link rel="stylesheet" href="../../../assets/fonts/ionicons.min.css" />
<link rel="stylesheet" href="../../../assets/fonts/fontawesome5-overrides.min.css" />
<link rel="stylesheet" href="../../../assets/css/Footer-Basic.css" />
<link rel="stylesheet" href="../../../assets/css/home-cards.css" />
<link rel="stylesheet" href="../../../assets/css/site.css" />
<link rel="stylesheet" href="../../../assets/css/style.css" />
<link rel="stylesheet" href="../../../assets/css/styles.css" />
<link rel="stylesheet" href="../../../assets/css/Team-Boxed.css" />
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script src="../../../assets/js/jquery-3.5.1.min.js"></script>
<link rel="stylesheet" href="../../../assets/highlight/styles/dracula.css" />
<script src="../../../assets/highlight/highlight.pack.js"></script>
<script>hljs.highlightAll();</script>
<script src="../../../assets/js/vue.js"></script>

</head>

<body style="height: 100vh;">
<div class="d-flex flex-column" id="all_page">

<!-- Body Header ------------------------------>

<section id="dotto-row-header">
<div class="row dotto-header">

<div class="col-1 d-flex justify-content-start align-items-center header-logo">
<a href="/" class="text-muted"><img id="logo" src="../../../assets/img/logo.svg" /></a>
</div>


<div class="col-6 col-sm-7">
<div class="header-title">
<h6 class="dotto-header-maintitle">
How to make better spaghetti plots
</h6>
<p class="dotto-header-description">
How to explore longitudinal data effectively  

</p>
<p class="dotto-header-tags">
<i class="fas fa-tags"></i>&nbsp; Visualization
</p>
</div>
</div>


<div class="col-1 d-flex justify-content-center align-items-center">
<button class="btn btn-outline-light btn-block header-like-btn" style="background-color:white" type="button">
<!-- LikeBtn.com BEGIN -->
<span class="likebtn-wrapper" data-theme="custom" data-btn_size="30" data-f_size="18" data-icon_size="30" data-icon_l="hrt13" data-icon_l_c="rgba(255,121,198,0.68)" data-icon_l_c_v="#ff79c6" data-icon_d_c_v="green" data-label_c="red" data-label_c_v="yellow" data-bg_c="#ffffff" data-bg_c_v="#ffffff" data-brdr_c="#ffffff" data-label_fs="r" data-i18n_like="  " data-identifier="65c120b4-0b1f-11ec-8645-c8b29b64e24a" data-dislike_enabled="false" data-site_id="604e13966fd08bbf03672c5b" data-counter_clickable="true" data-popup_disabled="true" data-share_enabled="false" data-tooltip_enabled="false"></span>
<script>(function(d,e,s){if(d.getElementById("likebtn_wjs"))return;a=d.createElement(e);m=d.getElementsByTagName(e)[0];a.async=1;a.id="likebtn_wjs";a.src=s;m.parentNode.insertBefore(a, m)})(document,"script","//w.likebtn.com/js/w/widget.js");</script>
<!-- LikeBtn.com END -->
</button>
</div>


<div class="col-3 d-flex justify-content-end dotto-header-user">

<div class="d-flex flex-column mx-3">
<div class="row">
<div @click="authorOneModal = true" type="button"
class="col d-flex d-md-flex flex-row flex-shrink-1 justify-content-sm-end align-items-sm-center justify-content-md-end align-items-md-center dotto-header-user-icon">
<img class="img-fluid user-image lang-color-r mx-auto" src="../../../assets/img/dotto.png" />
</div>
</div>
<h6 class="d-flex justify-content-end dotto-header-user-name mx-auto">
Parnian Jahangiri Rad
</h6>
</div>

</div>

</div>
</section>

<div v-if="authorOneModal" class="modal">
<!-- Modal content -->
<div class="modal-content">
<span @click="authorOneModal = false" class="close">&times;</span>
<div class="card" style="max-width: 540px">
<div class="row g-0">
<div class="col-md-4">
<img src="../../../assets/img/dotto.png" class="img-fluid" />
</div>
<div class="col-md-8">
<div class="card-body">
<ins><a href="https://www.linkedin.com/in/parnian-jahangiri-rad-4603611b4" class="text-dark" target="_blank"><h3 class="card-title mb-0">Parnian Jahangiri Rad</h3></a></ins>
<div class="card-text fs-4 my-2">Data science intern, DataMotto</div>
<small class="card-text text-muted my-2 fs-4">Language: r</small>
</div>
</div>
</div>
</div>
</div>
</div>

<div v-show="commentOpen" class="modal overflow-auto">
<div class="modal-comment overflow-auto">
<span @click="commentOpen = false" class="close">&times;</span>
<div id="disqus_thread"></div>
</div>
</div>


<section>
<div id="dotto-row-info" class="d-flex">

<div class="col-4 d-flex flex-grow-0 justify-content-start align-items-center align-items-xl-center">
<div class="d-flex mx-4 justify-content-around align-items-center bg-social-icons">

<div>
<i type="button" @click="activeLang = 'r'"
class="fab fa-r-project mx-2"
:class="{'lang-color-r': activeLang === 'r'}" >
  </i>
</div>

</div>
</div>


<div
class="col-8 d-flex justify-content-end align-items-center" style="padding-right: 15px">
<!--
<div class="d-flex justify-content-center align-items-center align-content-center bg-social-icons"
style="margin-right: 7px; width: 146.3px">
<span class="d-flex justify-content-lg-center align-items-lg-center" style="width: 133.7px">
<i class="fas fa-music" style="padding-right: 12px"> </i>
</span>
</div>
---->
<div class="d-flex justify-content-around align-items-center bg-social-icons">
<a href="https://twitter.com/share?text=How to make better spaghetti plots&amp;url=https://datamotto.com/posts/Dotto/D007-2021-09-01-how-to-make-better-spaghetti-plots/index.html&amp;hashtags=rstats" target="_blank" class="text-reset">
<i class="fab fa-twitter"></i></a>
<a href="https://www.linkedin.com/sharing/share-offsite/?url=https://datamotto.com/posts/Dotto/D007-2021-09-01-how-to-make-better-spaghetti-plots/index.html" target="_blank" class="text-reset">
<i class="fa fa-linkedin-square"></i></a>
</div>
<div class="text-nowrap d-flex justify-content-around align-items-center bg-social-icons bg-bugs-icons">
<a href="https://github.com/DataMotto/DataMotto/blob/master/posts/Dotto/D007-2021-09-01-how-to-make-better-spaghetti-plots/how-to-make-better-spaghetti-plots.Rmd" target="_blank" class="text-reset">
<i class="fab fa-github header-social-icon"></i></a>
<a href="https://github.com/DataMotto/DataMotto/issues/new?assignees=&labels=bug&template=bug_report.md&title=" target="_blank" class="text-reset">
<i class="fas fa-bug header-social-icon"></i></a>
</div>
</div>

</div>
</section>




<section v-if="activeDotto === '1'"
class="text-left d-flex flex-row flex-grow-1 flex-wrap" id="dotto-row-main">
<div class="col-12 col-lg-1" id="dotto-main-dots">

<button type="button" @click="activeMotto = '1'"
class="btn dotto-main-dot-shape"
:class="{'btn-light': activeMotto === '1', 'btn-outline-light': activeMotto !== '1'}">1</button>


<button type="button" @click="activeMotto = '2'"
class="btn dotto-main-dot-shape"
:class="{'btn-light': activeMotto === '2', 'btn-outline-light': activeMotto !== '2'}">2</button>


<button type="button" @click="activeMotto = '3'"
class="btn dotto-main-dot-shape"
:class="{'btn-light': activeMotto === '3', 'btn-outline-light': activeMotto !== '3'}">3</button>


<button type="button" @click="activeMotto = '4'"
class="btn dotto-main-dot-shape"
:class="{'btn-light': activeMotto === '4', 'btn-outline-light': activeMotto !== '4'}">4</button>


<button type="button" @click="activeMotto = '5'"
class="btn dotto-main-dot-shape"
:class="{'btn-light': activeMotto === '5', 'btn-outline-light': activeMotto !== '5'}">5</button>


<button type="button" @click="activeMotto = '6'"
class="btn dotto-main-dot-shape"
:class="{'btn-light': activeMotto === '6', 'btn-outline-light': activeMotto !== '6'}">6</button>


<button type="button" @click="activeMotto = '7'"
class="btn dotto-main-dot-shape"
:class="{'btn-light': activeMotto === '7', 'btn-outline-light': activeMotto !== '7'}">7</button>


<button type="button" @click="activeMotto = '8'"
class="btn dotto-main-dot-shape"
:class="{'btn-light': activeMotto === '8', 'btn-outline-light': activeMotto !== '8'}">8</button>

</div>

<!-- Dot 1, lang: r ------------------------------------------------>

<div v-if="activeMotto === '1'" class="col-12 col-lg-11 d-flex p-0 wrapper">
<div class="box overflow-auto dotto-main-intro dotto-dot-instruction">
<div class="card-header">
<h1>&nbsp;Instructions:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">
<p class="mx-2">

<p><strong><code>longitudinal data</code> and <code>brolgar</code> package</strong><br />
<strong>Dataset</strong> : <code>heights</code> from <a href="https://github.com/njtierney/brolgar">brolgar</a> package<br />
<strong>What is longitudinal data?</strong><br />
individuals repeatedly measured through time.<br />
<strong>Why <code>brolgar</code>?</strong><br />
Problems of our spaghetti plot:<br />
- Overplotting<br />
- Can not see individuals <code>brolgar</code> package helps us to solve following problems:<br />
- How to look at <strong>some</strong> of the data?<br />
- How to find <strong>interesting observations</strong>?<br />
- How to understand a model?</p>

</p>
</div>
 


</div>
<div class="handler dotto-main-intro"></div>
<div id="resizable">
<div class="box2 dotto-main overflow-auto dotto-main-codes">
<div class="card-header dot-codes">
<h1>&nbsp;Codes:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">

<div class="sourceCode" id="cb1"><pre class="sourceCode r dotto-dot-code"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(brolgar)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tsibble)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(feasts)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gghighlight)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># remove column &#39;continent&#39; from dataset(because it is not needed)</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>heights_data <span class="ot">&lt;-</span> heights[,<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#an example of longitudinal data</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>heights_data <span class="sc">%&gt;%</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Australia&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>(<span class="at">caption =</span> <span class="st">&quot;An example of longitudinal data&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_material</span>(<span class="fu">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>))</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">#plot longitudinal data of 144 contries(why brolgar)</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> heights_data ,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> year ,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> height_cm)) <span class="sc">+</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> country))</span></code></pre></div>

</div>
 


</div>
<div class="handler2 dotto-main-output"></div>
<div class="box2 dotto-main overflow-auto dotto-main-output">
<div class="card-header">
<h1>&nbsp;Results:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2 dotto-dot-output">

<table class=" lightable-material lightable-striped lightable-hover" style="font-family: &quot;Source Sans Pro&quot;, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
An example of longitudinal data
</caption>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
height_cm
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1850
</td>
<td style="text-align:right;">
170.000
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1860
</td>
<td style="text-align:right;">
170.600
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1870
</td>
<td style="text-align:right;">
170.053
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1880
</td>
<td style="text-align:right;">
171.100
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1890
</td>
<td style="text-align:right;">
171.300
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1900
</td>
<td style="text-align:right;">
172.300
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1910
</td>
<td style="text-align:right;">
172.700
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1920
</td>
<td style="text-align:right;">
172.846
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
176.300
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1970
</td>
<td style="text-align:right;">
178.400
</td>
</tr>
</tbody>
</table>
<p><img src="how-to-make-better-spaghetti-plots_files/figure-html/unnamed-chunk-3-1.png" width="672" style="display: block; margin: auto auto auto 0;" /></p>

</div>
 
</div>
</div>
</div>

<!-- Dot 2, lang: r ------------------------------------------------>

<div v-if="activeMotto === '2'" class="col-12 col-lg-11 d-flex p-0 wrapper">
<div class="box overflow-auto dotto-main-intro dotto-dot-instruction">
<div class="card-header">
<h1>&nbsp;Instructions:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">
<p class="mx-2">

<p><strong>Longitudinal data as a time series</strong><br />
<strong>time series:</strong><br />
Anything that is observed sequentially over time is a time series.</p>
<p>With this approach,we can use <code>tsibble</code> package to have special time series that are compatible with <code>brolgar</code> package tools.<br />
<code>as_tsibble</code>: coerce a data frame to tsibble.<br />
<strong>parameters</strong>:<br />
- <code>index</code>: Your time variable<br />
- <code>key</code> : Variable(s) defining individual groups (or series)<br />
For more information,please visit <a href="https://tsibble.tidyverts.org/">here</a>.</p>

</p>
</div>
 


</div>
<div class="handler dotto-main-intro"></div>
<div id="resizable">
<div class="box2 dotto-main overflow-auto dotto-main-codes">
<div class="card-header dot-codes">
<h1>&nbsp;Codes:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">

<div class="sourceCode" id="cb2"><pre class="sourceCode r dotto-dot-code"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>heights_data <span class="ot">&lt;-</span> <span class="fu">as_tsibble</span>(heights_data,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">index =</span> year,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">key =</span> country,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">regular =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>heights_data</span></code></pre></div>

</div>
 


</div>
<div class="handler2 dotto-main-output"></div>
<div class="box2 dotto-main overflow-auto dotto-main-output">
<div class="card-header">
<h1>&nbsp;Results:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2 dotto-dot-output">

<pre><code>## # A tsibble: 1,490 x 3 [!]
## # Key:       country [144]
##    country      year height_cm
##    &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanistan  1870      168.
##  2 Afghanistan  1880      166.
##  3 Afghanistan  1930      167.
##  4 Afghanistan  1990      167.
##  5 Afghanistan  2000      161.
##  6 Albania      1880      170.
##  7 Albania      1890      170.
##  8 Albania      1900      169.
##  9 Albania      2000      168.
## 10 Algeria      1910      169.
## # … with 1,480 more rows</code></pre>

</div>
 
</div>
</div>
</div>

<!-- Dot 3, lang: r ------------------------------------------------>

<div v-if="activeMotto === '3'" class="col-12 col-lg-11 d-flex p-0 wrapper">
<div class="box overflow-auto dotto-main-intro dotto-dot-instruction">
<div class="card-header">
<h1>&nbsp;Instructions:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">
<p class="mx-2">

<p><strong>look at many subsamples using <code>facet_sample</code></strong><br />
<code>facet_sample</code> helps us to specify:<br />
- numbers of keys per facet by <code>n_per_facet</code><br />
- number of facets(plots) by <code>n_facets</code></p>

</p>
</div>
 


</div>
<div class="handler dotto-main-intro"></div>
<div id="resizable">
<div class="box2 dotto-main overflow-auto dotto-main-codes">
<div class="card-header dot-codes">
<h1>&nbsp;Codes:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">

<div class="sourceCode" id="cb4"><pre class="sourceCode r dotto-dot-code"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>gg_heights <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(heights_data, <span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y =</span> height_cm,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">group =</span> country)) <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#see more individuals</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>gg_heights <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_sample</span>(</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_per_facet =</span> <span class="dv">3</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_facets =</span> <span class="dv">9</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;see more individulas&quot;</span>)</span></code></pre></div>

</div>
 


</div>
<div class="handler2 dotto-main-output"></div>
<div class="box2 dotto-main overflow-auto dotto-main-output">
<div class="card-header">
<h1>&nbsp;Results:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2 dotto-dot-output">

<p><img src="how-to-make-better-spaghetti-plots_files/figure-html/unnamed-chunk-9-1.png" width="672" style="display: block; margin: auto auto auto 0;" /></p>

</div>
 
</div>
</div>
</div>

<!-- Dot 4, lang: r ------------------------------------------------>

<div v-if="activeMotto === '4'" class="col-12 col-lg-11 d-flex p-0 wrapper">
<div class="box overflow-auto dotto-main-intro dotto-dot-instruction">
<div class="card-header">
<h1>&nbsp;Instructions:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">
<p class="mx-2">

<p><strong>See all individuals along some variable by <code>facet_strata</code></strong><br />
<code>facet_strata</code> helps us to plot <strong>all</strong> individuals, and we can arrange them in length by <code>along</code> parameter (<code>along = -year</code> will arrange spaghetti plots from tallest to shortest)</p>

</p>
</div>
 


</div>
<div class="handler dotto-main-intro"></div>
<div id="resizable">
<div class="box2 dotto-main overflow-auto dotto-main-codes">
<div class="card-header dot-codes">
<h1>&nbsp;Codes:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">

<div class="sourceCode" id="cb5"><pre class="sourceCode r dotto-dot-code"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>gg_heights <span class="sc">+</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_strata</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">along =</span> <span class="sc">-</span>year</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;see all individuals&quot;</span>)</span></code></pre></div>

</div>
 


</div>
<div class="handler2 dotto-main-output"></div>
<div class="box2 dotto-main overflow-auto dotto-main-output">
<div class="card-header">
<h1>&nbsp;Results:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2 dotto-dot-output">

<p><img src="how-to-make-better-spaghetti-plots_files/figure-html/unnamed-chunk-12-1.png" width="672" style="display: block; margin: auto auto auto 0;" /></p>

</div>
 
</div>
</div>
</div>

<!-- Dot 5, lang: r ------------------------------------------------>

<div v-if="activeMotto === '5'" class="col-12 col-lg-11 d-flex p-0 wrapper">
<div class="box overflow-auto dotto-main-intro dotto-dot-instruction">
<div class="card-header">
<h1>&nbsp;Instructions:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">
<p class="mx-2">

<p><strong>How to find interesting observations</strong><br />
We would like to find countries with minimum and maximum of <code>max hight</code>.<br />
<code>fit_ranges</code> in <code>features</code> gives us range of data.</p>

</p>
</div>
 


</div>
<div class="handler dotto-main-intro"></div>
<div id="resizable">
<div class="box2 dotto-main overflow-auto dotto-main-codes">
<div class="card-header dot-codes">
<h1>&nbsp;Codes:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">

<div class="sourceCode" id="cb6"><pre class="sourceCode r dotto-dot-code"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>max_heights <span class="ot">&lt;-</span> heights <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">features</span>(height_cm, feat_ranges) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country,max)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>interesting_data <span class="ot">&lt;-</span> max_heights <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(max <span class="sc">==</span> <span class="fu">max</span>(max) <span class="sc">|</span> max <span class="sc">==</span> <span class="fu">min</span>(max))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>heights_data <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(interesting_data ,<span class="at">by =</span> <span class="st">&quot;country&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> height_cm,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> country,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">gghighlight</span>(<span class="sc">!</span><span class="fu">is.na</span>(max)) <span class="sc">+</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggtitle</span>(<span class="st">&quot;Countries with smallest and largest max height&quot;</span>)</span></code></pre></div>

</div>
 


</div>
<div class="handler2 dotto-main-output"></div>
<div class="box2 dotto-main overflow-auto dotto-main-output">
<div class="card-header">
<h1>&nbsp;Results:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2 dotto-dot-output">

<p><img src="how-to-make-better-spaghetti-plots_files/figure-html/unnamed-chunk-15-1.png" width="672" style="display: block; margin: auto auto auto 0;" /></p>

</div>
 
</div>
</div>
</div>

<!-- Dot 6, lang: r ------------------------------------------------>

<div v-if="activeMotto === '6'" class="col-12 col-lg-11 d-flex p-0 wrapper">
<div class="box overflow-auto dotto-main-intro dotto-dot-instruction">
<div class="card-header">
<h1>&nbsp;Instructions:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">
<p class="mx-2">

<p><strong>how to understand a model?</strong><br />
We will fit a mixed effects model on our data.<br />
-<a href="https://www.rdocumentation.org/packages/lme4/versions/1.1-27.1/topics/lmer">lmer</a> from <code>lme4</code> package : fits linear mixed effects model to data.</p>

</p>
</div>
 


</div>
<div class="handler dotto-main-intro"></div>
<div id="resizable">
<div class="box2 dotto-main overflow-auto dotto-main-codes">
<div class="card-header dot-codes">
<h1>&nbsp;Codes:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">

<div class="sourceCode" id="cb7"><pre class="sourceCode r dotto-dot-code"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelr)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># fit a mixed effects model</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>heights_fit <span class="ot">&lt;-</span> <span class="fu">lmer</span>(height_cm <span class="sc">~</span> year <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>country), heights_data)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>heights_aug <span class="ot">&lt;-</span> heights_data <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_predictions</span>(heights_fit, <span class="at">var =</span> <span class="st">&quot;pred&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_residuals</span>(heights_fit, <span class="at">var =</span> <span class="st">&quot;res&quot;</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>heights_aug</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># plot model</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>gg_heights_fit <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(heights_aug,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> year ,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> pred ,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">group =</span> country)) <span class="sc">+</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>gg_heights_fit <span class="sc">+</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;model prediction plot&quot;</span>)</span></code></pre></div>

</div>
 


</div>
<div class="handler2 dotto-main-output"></div>
<div class="box2 dotto-main overflow-auto dotto-main-output">
<div class="card-header">
<h1>&nbsp;Results:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2 dotto-dot-output">

<pre><code>## # A tsibble: 1,490 x 5 [!]
## # Key:       country [144]
##    country      year height_cm  pred    res
##    &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 Afghanistan  1870      168.  164.  4.59 
##  2 Afghanistan  1880      166.  164.  1.52 
##  3 Afghanistan  1930      167.  166.  0.823
##  4 Afghanistan  1990      167.  168. -1.04 
##  5 Afghanistan  2000      161.  169. -7.10 
##  6 Albania      1880      170.  168.  2.39 
##  7 Albania      1890      170.  168.  1.73 
##  8 Albania      1900      169.  168.  0.769
##  9 Albania      2000      168.  172. -4.14 
## 10 Algeria      1910      169.  168.  1.28 
## # … with 1,480 more rows</code></pre>
<p><img src="how-to-make-better-spaghetti-plots_files/figure-html/unnamed-chunk-18-1.png" width="672" style="display: block; margin: auto auto auto 0;" /></p>

</div>
 
</div>
</div>
</div>

<!-- Dot 7, lang: r ------------------------------------------------>

<div v-if="activeMotto === '7'" class="col-12 col-lg-11 d-flex p-0 wrapper">
<div class="box overflow-auto dotto-main-intro dotto-dot-instruction">
<div class="card-header">
<h1>&nbsp;Instructions:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">
<p class="mx-2">

<p><strong>Look at <code>many</code> and <code>all</code> subsamples</strong><br />
We will look at <strong>many</strong> and <strong>all</strong> subsamples by <code>facet_sample</code> and <code>facet_strata</code> .</p>

</p>
</div>
 


</div>
<div class="handler dotto-main-intro"></div>
<div id="resizable">
<div class="box2 dotto-main overflow-auto dotto-main-codes">
<div class="card-header dot-codes">
<h1>&nbsp;Codes:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">

<div class="sourceCode" id="cb9"><pre class="sourceCode r dotto-dot-code"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># look at &#39;many&#39; subsamples</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>gg_heights_fit <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_sample</span>() <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;look at many subsamples&quot;</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># look at &#39;all&#39; subsamples</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>gg_heights_fit <span class="sc">+</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_strata</span>(<span class="at">along =</span> <span class="sc">-</span>res) <span class="sc">+</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;look at all subsamples&quot;</span>)</span></code></pre></div>

</div>
 


</div>
<div class="handler2 dotto-main-output"></div>
<div class="box2 dotto-main overflow-auto dotto-main-output">
<div class="card-header">
<h1>&nbsp;Results:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2 dotto-dot-output">

<p><img src="how-to-make-better-spaghetti-plots_files/figure-html/unnamed-chunk-21-1.png" width="672" style="display: block; margin: auto auto auto 0;" /><img src="how-to-make-better-spaghetti-plots_files/figure-html/unnamed-chunk-21-2.png" width="672" style="display: block; margin: auto auto auto 0;" /></p>

</div>
 
</div>
</div>
</div>

<!-- Dot 8, lang: r ------------------------------------------------>

<div v-if="activeMotto === '8'" class="col-12 col-lg-11 d-flex p-0 wrapper">
<div class="box overflow-auto dotto-main-intro dotto-dot-instruction">
<div class="card-header">
<h1>&nbsp;Instructions:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">
<p class="mx-2">

<p><strong>Look at the predictions with the data</strong><br />
<code>sample_n_keys</code> from <code>brolgar</code> package: helps us to take a <strong>random sample</strong> of <code>n</code> keys.<br />
Let’s plot predictions of 9 randomly selected countries using <code>sample_n_keys</code>.</p>

</p>
</div>
 


</div>
<div class="handler dotto-main-intro"></div>
<div id="resizable">
<div class="box2 dotto-main overflow-auto dotto-main-codes">
<div class="card-header dot-codes">
<h1>&nbsp;Codes:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2">

<div class="sourceCode" id="cb10"><pre class="sourceCode r dotto-dot-code"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2020-01-21</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>heights_sample <span class="ot">&lt;-</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>heights_aug <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n_keys</span>(<span class="at">size =</span> <span class="dv">9</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> pred,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> country)) <span class="sc">+</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>country)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>heights_sample <span class="sc">+</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> height_cm)) <span class="sc">+</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Look at 9 predictions with the data &quot;</span>)</span></code></pre></div>

</div>
 


</div>
<div class="handler2 dotto-main-output"></div>
<div class="box2 dotto-main overflow-auto dotto-main-output">
<div class="card-header">
<h1>&nbsp;Results:</h1>
</div>
<br>
 
<div v-if="activeLang === 'r'" class="mx-2 dotto-dot-output">

<p><img src="how-to-make-better-spaghetti-plots_files/figure-html/unnamed-chunk-24-1.png" width="672" style="display: block; margin: auto auto auto 0;" /></p>

</div>
 
</div>
</div>
</div>

</section>
<!-- Body Footer ----------------------------------->

<section id="dotto-footer">
<div class="col-12 col-md-9">
<div class="d-flex" id="dotto-row-lines">
<img src="../../../assets/img/Dotto.svg" width="35" height="35" type="button" class=" ml-5 icon d-sm-flex justify-content-sm-center dotto-lines-icons">
</i>
</div>
</div>
<div class="col-12 col-md-3 pt-2">
<div class="alert alert-danger dotto-alert-comment text-center" role="alert">
<span type="button" @click="commentOpen = true" class="footer-disqus-text">
<strong><i class="fas fa-comments fa-1x" style="font-size: 21px"> </i>
<span class="disqus-comment-count" data-disqus-url="https://datamotto.com/posts/Dotto/D007-2021-09-01-how-to-make-better-spaghetti-plots/index.html" data-disqus-identifier="65c120b4-0b1f-11ec-8645-c8b29b64e24a"></span>
</strong>
<span> for this Dotto.</span>
<span> Write yours here!</span>
</span>

<script>
var disqus_config = function () {
  this.page.url = "https://datamotto.com/posts/Dotto/D007-2021-09-01-how-to-make-better-spaghetti-plots/index.html";
  this.page.identifier = "65c120b4-0b1f-11ec-8645-c8b29b64e24a";
};

(function() {
var d = document, s = d.createElement("script");
s.src = "https://datamotto-com.disqus.com/embed.js";
s.setAttribute("data-timestamp", +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<script id="dsq-count-scr" src="//datamotto-com.disqus.com/count.js" async></script>

</div>
</div>
</section>


</div>
<!-- Don't indent these lines or it will mess pre blocks indentation -->
<script src="../../../assets/js/post.js"></script>
<script src="../../../assets/js/jquery.min.js"></script>
<script src="../../../assets/bootstrap/js/bootstrap.min.js"></script>
<script src="../../../assets/js/bs-init.js"></script>
<script src="../../../assets/js/carts.js"></script>
<script src="../../../assets/js/Index_page.js"></script>
<script src="../../../assets/js/jquery-3.5.1.min.js"></script>
</body>
</html>
